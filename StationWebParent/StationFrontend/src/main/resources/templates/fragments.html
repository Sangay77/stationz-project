<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security6">
<head th:fragment="page_head(title)">

    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>[[${title}]]- [[${SITE_NAME}]]</title>

    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.2/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/fontawesome/all.css}">
    <script th:src="@{/webjars/jquery/3.7.0/jquery.min.js}"></script>
    <script th:src="@{/webjars/bootstrap/5.3.2/js/bootstrap.bundle.min.js}"></script>


    <script th:src="@{/js/common.js}"></script>

</head>


<body>

<div th:fragment="navbar">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container">
            <!-- Logo and Brand -->
            <a class="navbar-brand d-flex align-items-center" th:href="@{/}">
                <img id="thumbnail" alt="Site Logo" th:src="@{${SITE_LOGO}}" class="navbar-logo me-2">
                <span class="fw-bold">[[${SITE_NAME}]]</span>
            </a>

            <!-- Mobile Toggle Button -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar"
                    aria-controls="mainNavbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Navbar Content -->
            <div class="collapse navbar-collapse" id="mainNavbar">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <!-- EcoPure Cleaning Dropdown -->
                    <li class="nav-item dropdown mx-lg-1" sec:authorize="!isAuthenticated()">
                        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="ecoPureDropdown"
                           role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-tint me-1 d-none d-lg-inline"></i> EcoPure
                        </a>
                        <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="ecoPureDropdown">
                            <li><a class="dropdown-item d-flex align-items-center" th:href="@{/cleaning/carpet}">
                                <i class="fas fa-rug me-2"></i>Carpet Cleaning</a></li>
                            <li><a class="dropdown-item d-flex align-items-center" th:href="@{/cleaning/floor}">
                                <i class="fas fa-home me-2"></i>Hard Floor Cleaning</a></li>
                            <li><a class="dropdown-item d-flex align-items-center" th:href="@{/cleaning/glass}">
                                <i class="fas fa-window-maximize me-2"></i>Glass Cleaning</a></li>
                        </ul>
                    </li>

                    <!-- Druk Station Dropdown -->
                    <li class="nav-item dropdown mx-lg-1" sec:authorize="!isAuthenticated()">
                        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="drukDropdown"
                           role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-mug-hot me-1 d-none d-lg-inline"></i> Druk Station
                        </a>
                        <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="drukDropdown">
                            <li><a class="dropdown-item d-flex align-items-center" th:href="@{/restaurant/menu}">
                                <i class="fas fa-bars me-2"></i>Menu</a></li>
                            <li><a class="dropdown-item d-flex align-items-center" th:href="@{/restaurant/bar}">
                                <i class="fas fa-cocktail me-2"></i>Bar</a></li>
                            <li><a class="dropdown-item d-flex align-items-center" th:href="@{/restaurant/karaoke}">
                                <i class="fas fa-microphone me-2"></i>Karaoke</a></li>
                            <li><a class="dropdown-item d-flex align-items-center" th:href="@{/restaurant/events}">
                                <i class="fas fa-calendar-alt me-2"></i>Event Booking</a></li>
                        </ul>
                    </li>

                    <!-- Station Workshop Dropdown -->
                    <li class="nav-item dropdown mx-lg-1" sec:authorize="!isAuthenticated()">
                        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="workshopDropdown"
                           role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-tools me-1 d-none d-lg-inline"></i> Workshop
                        </a>
                        <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="workshopDropdown">
                            <li><a class="dropdown-item d-flex align-items-center" th:href="@{/workshop/repairs}">
                                <i class="fas fa-wrench me-2"></i>Car Repairs</a></li>
                            <li><a class="dropdown-item d-flex align-items-center" th:href="@{/workshop/maintenance}">
                                <i class="fas fa-cogs me-2"></i>Routine Maintenance</a></li>
                            <li><a class="dropdown-item d-flex align-items-center" th:href="@{/workshop/fleet}">
                                <i class="fas fa-truck me-2"></i>Fleet Services</a></li>
                        </ul>
                    </li>

                    <li class="nav-item mx-lg-1" sec:authorize="isAuthenticated()">
                        <a class="nav-link d-flex align-items-center" th:href="@{/products}">
                            <i class="fas fa-user me-1 d-none d-lg-inline"></i> Product
                        </a>
                    </li>

                    <li class="nav-item mx-lg-1" sec:authorize="isAuthenticated()">
                        <a class="nav-link d-flex align-items-center" th:href="@{/cart}">
                            <i class="fas fa-shopping-cart me-1 d-none d-lg-inline"></i> Carts
                        </a>
                    </li>

                    <li class="nav-item mx-lg-1" sec:authorize="isAuthenticated()">
                        <a class="nav-link d-flex align-items-center" th:href="@{/products}">
                            <i class="fas fa-box me-1 d-none d-lg-inline"></i> Orders
                        </a>
                    </li>

                    <li class="nav-item mx-lg-1" sec:authorize="!isAuthenticated()">
                        <a class="nav-link d-flex align-items-center" th:href="@{/contact}">
                            <i class="fas fa-phone me-1 d-none d-lg-inline"></i> Contact
                        </a>
                    </li>
                </ul>

                <ul class="navbar-nav ms-auto">
                    <!-- Show when not logged in -->
                    <li class="nav-item mx-lg-1" sec:authorize="!isAuthenticated()">
                        <a class="nav-link d-flex align-items-center" th:href="@{/login}">
                            <i class="fas fa-sign-in-alt me-1 d-none d-lg-inline"></i> Login
                        </a>
                    </li>

                    <!-- Show when logged in -->
                    <li class="nav-item dropdown mx-lg-1" sec:authorize="isAuthenticated()">
                        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user-circle me-2"></i>
                            <span th:text="${#authentication.principal.fullName}"></span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                            <li>
                                <a class="dropdown-item" th:href="@{/account_details}">
                                    <i class="fas fa-cog me-2"></i> Account Setting
                                </a>
                            </li>
                            <li>
                                <form th:action="@{/logout}" method="post" class="d-inline">
                                    <button type="submit" class="dropdown-item">
                                        <i class="fas fa-sign-out-alt me-2"></i> Logout
                                    </button>
                                </form>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <style>
        .navbar {
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
            padding: 0.5rem 0;
        }
        .navbar-brand {
            font-size: 1.5rem;
        }
        .navbar-logo {
            height: 40px; /* Fixed height for better control */
            width: auto; /* Maintain aspect ratio */
            object-fit: contain;
            border-radius: 4px; /* Subtle rounding */
        }
        .nav-link {
            font-weight: 500;
            padding: 0.5rem 1rem;
            transition: all 0.3s ease;
            border-radius: 0.5rem;
        }
        .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        .dropdown-menu {
            border: none;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        .dropdown-item {
            padding: 0.5rem 1rem;
            transition: all 0.2s ease;
        }
        .dropdown-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
            padding-left: 1.25rem;
        }
        .btn-book {
            transition: all 0.3s ease;
        }
        .btn-book:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        @media (max-width: 991.98px) {
            .dropdown-menu {
                margin-top: 0.5rem;
                border-radius: 0.5rem;
            }
            .navbar-logo {
                height: 35px; /* Slightly smaller on mobile */
            }
        }
    </style>

</div>


<div th:fragment="resultsSummary(entityName)" class="text-center m-1">
    <span th:if="${totalItems > 0}">
        Showing <span th:text="${entityName}">items</span> # Total Items: [[${totalItems}]]
        Page [[${currentPage}]] of [[${totalPages}]]
    </span>
    <span th:unless="${totalItems > 0}">
        No <span th:text="${entityName}">items</span> found.
    </span>
</div>

<div th:fragment="pagination(baseUrl)" th:if="${totalPages > 1}">
    <nav>
        <ul class="pagination justify-content-center">
            <!-- First Page -->
            <li th:class="${currentPage > 1 ? 'page-item' : 'page-item disabled'}">
                <a class="page-link"
                   th:href="@{${baseUrl + '/1'}(
                       sortField=${sortField},
                       sortDir=${sortDir},
                       keyword=${keyword}
                   )}">
                    First
                </a>
            </li>

            <!-- Previous Page -->
            <li th:class="${currentPage > 1 ? 'page-item' : 'page-item disabled'}">
                <a class="page-link"
                   th:href="@{${baseUrl + '/' + (currentPage - 1)}(
                       sortField=${sortField},
                       sortDir=${sortDir},
                       keyword=${keyword}
                   )}">
                    Previous
                </a>
            </li>

            <!-- Page Numbers -->
            <li th:each="i : ${#numbers.sequence(1, totalPages)}"
                th:class="${currentPage != i ? 'page-item' : 'page-item active'}">
                <a class="page-link"
                   th:href="@{${baseUrl + '/' + i}(
                       sortField=${sortField},
                       sortDir=${sortDir},
                       keyword=${keyword}
                   )}">
                    [[${i}]]
                </a>
            </li>

            <!-- Next Page -->
            <li th:class="${currentPage < totalPages ? 'page-item' : 'page-item disabled'}">
                <a class="page-link"
                   th:href="@{${baseUrl + '/' + (currentPage + 1)}(
                       sortField=${sortField},
                       sortDir=${sortDir},
                       keyword=${keyword}
                   )}">
                    Next
                </a>
            </li>

            <!-- Last Page -->
            <li th:class="${currentPage < totalPages ? 'page-item' : 'page-item disabled'}">
                <a class="page-link"
                   th:href="@{${baseUrl + '/' + totalPages}(
                       sortField=${sortField},
                       sortDir=${sortDir},
                       keyword=${keyword}
                   )}">
                    Last
                </a>
            </li>
        </ul>
    </nav>
</div>

<footer th:fragment="footer" class="bg-light text-dark pt-5 border-top">
    <div class="container">
        <div class="row gy-5">

            <!-- Brand & Social -->
            <div class="col-lg-4 col-md-6">
                <a href="/" class="d-flex align-items-center mb-3 text-dark text-decoration-none">
                    <img th:src="@{/images/station_logo.jpeg}" alt="Station Group Logo" height="50" class="me-3">
                    <span class="fs-4 fw-bold">Station Group</span>
                </a>
                <p class="text-muted">Your one-stop hub for premium cleaning, dining & entertainment, and automotive
                    care in Western Australia.</p>

                <div class="d-flex gap-3 mt-3">
                    <a href="#" class="text-dark fs-5" aria-label="Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="#" class="text-dark fs-5" aria-label="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="#" class="text-dark fs-5" aria-label="LinkedIn">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                    <a href="#" class="text-dark fs-5" aria-label="YouTube">
                        <i class="fab fa-youtube"></i>
                    </a>
                </div>
            </div>

            <!-- Services -->
            <div class="col-lg-2 col-md-6">
                <h6 class="fw-bold text-uppercase mb-3">Services</h6>
                <ul class="list-unstyled">
                    <li><a th:href="@{/ecopure}" class="text-muted d-block py-1 text-decoration-none">EcoPure
                        Cleaning</a></li>
                    <li><a th:href="@{/druk-station}" class="text-muted d-block py-1 text-decoration-none">Druk
                        Restaurant & Bar</a></li>
                    <li><a th:href="@{/workshop}" class="text-muted d-block py-1 text-decoration-none">Auto Workshop</a>
                    </li>
                </ul>
            </div>

            <!-- Company Info -->
            <div class="col-lg-2 col-md-6">
                <h6 class="fw-bold text-uppercase mb-3">Company</h6>
                <ul class="list-unstyled">
                    <li><a th:href="@{/about}" class="text-muted d-block py-1 text-decoration-none">About Us</a></li>
                    <li><a th:href="@{/careers}" class="text-muted d-block py-1 text-decoration-none">Careers</a></li>
                    <li><a th:href="@{/blog}" class="text-muted d-block py-1 text-decoration-none">Blog</a></li>
                </ul>
            </div>

            <!-- Contact Info -->
            <div class="col-lg-4 col-md-6">
                <h6 class="fw-bold text-uppercase mb-3">Contact</h6>
                <ul class="list-unstyled">
                    <li class="d-flex mb-3 align-items-start">
                        <i class="fas fa-map-marker-alt text-primary me-3 mt-1"></i>
                        <div>
                            <strong>Busselton Location</strong><br>
                            <span class="text-muted">123 Station Way, Busselton WA 6280</span>
                        </div>
                    </li>
                    <li class="d-flex mb-3 align-items-start">
                        <i class="fas fa-phone-alt text-primary me-3 mt-1"></i>
                        <div>
                            <strong>General Enquiries</strong><br>
                            <span class="text-muted">(08) 9755 1234</span>
                        </div>
                    </li>
                    <li>
                        <a th:href="@{/contact}" class="btn btn-outline-primary btn-sm rounded-pill mt-2">Contact Us</a>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Bottom Bar -->
        <div class="row mt-5 pt-4 border-top text-muted small">
            <div class="col-md-6 text-center text-md-start mb-2 mb-md-0">
                [[${COPYRIGHT}]]
            </div>
            <div class="col-md-6 text-center text-md-end">
                <a th:href="@{/privacy}" class="text-muted text-decoration-none me-3">Privacy Policy</a>
                <a th:href="@{/terms}" class="text-muted text-decoration-none">Terms of Service</a>
            </div>
        </div>
    </div>
</footer>

<div th:fragment="modal_dialog" class="modal fade" id="modalMessage" tabindex="-1" aria-labelledby="modalTitle"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-warning text-dark">
                <h5 class="modal-title" id="modalTitle">Warning</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="modalBody">
                Message goes here...
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>

</body>
</html>
